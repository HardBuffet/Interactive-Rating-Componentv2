<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Frontend Mentor | Interactive rating component</title>
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./images/favicon-32x32.png"
    />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <script src="js/script.js" type="module"></script>
  </head>
  <body class="page">
    <header>
      <h1 class="sr-only">Give us feedback.</h1>
    </header>
    <main>
      <div class="card-feedback">
        <template data-card-output>
          <div class="card-feedback__output">
            <img
              src="images/illustration-thank-you.svg"
              alt=""
              width="162"
              height="108"
            />
            <p
              class="utilities utilities_color_orange utilities_bg_medium-grey utilities_pad-1 utilities_radius-1"
            >
              You selected
              <span data-rate>4</span>
              out of 5
            </p>
          </div>
          <div class="card-feedback__text">
            <h2>Thank you!</h2>
            <p>
              We appreciate you taking the time to give a rating. If you ever
              need more support, donâ€™t hesitate to get in touch!
            </p>
          </div>
        </template>
        <div class="icon-star">
          <img src="images/icon-star.svg" alt="" width="17" height="16" />
        </div>
        <div class="card-feedback__text">
          <h2>How did we do?</h2>
          <p>
            Please let us know how we did with your support request. All
            feedback is appreciated to help us improve our offering!
          </p>
        </div>
        <form class="card-feedback__form" action="javascript:void(0);">
          <div class="card-feedback__buttons">
            <input
              class="button-rate button-rate_hover button-rate_focus"
              type="button"
              value="1"
              aria-label="1 star."
            />
            <input
              class="button-rate button-rate_hover button-rate_focus"
              type="button"
              value="2"
              aria-label="2 stars."
            />
            <input
              class="button-rate button-rate_hover button-rate_focus"
              type="button"
              value="3"
              aria-label="3 stars."
            />
            <input
              class="button-rate button-rate_hover button-rate_focus"
              type="button"
              value="4"
              aria-label="4 stars."
            />
            <input
              class="button-rate button-rate_hover button-rate_focus"
              type="button"
              value="5"
              aria-label="5 stars."
            />
          </div>
          <input
            class="button-submit button-submit_hover button-submit_active"
            type="submit"
            value="SUBMIT"
          />
        </form>
      </div>
      <footer class="attribution page__attribution">
        <p class="attribution__note">
          Challenge by
          <a
            class="attribution__link attribution__link_hover"
            href="https://www.frontendmentor.io?ref=challenge"
            target="_blank"
            >Frontend Mentor</a
          >
        </p>
        <p class="attribution__note">
          Coded by
          <a
            class="attribution__link attribution__link_hover"
            href="https://www.frontendmentor.io/profile/HardBuffet"
            >HardBuffet</a
          >
        </p>
      </footer>
    </main>
    <script>
      const submitBtn = document.querySelector(".button-submit_active");
const form = document.querySelector(".card-feedback__form");
const body = document.body;
let rate = null;


  // check the current target
  // if the rate button is clicked get its value and store it in a variable
  // otherwise set the rate to null and return the function
  body.onclick = function (e) {
    if (
      e.target.nodeName === "INPUT" &&
      e.target.getAttributeNode("type").value === "button"
    ) {
      rate = e.target.value;
    } else {
      rate = null;
      return;
    }
  };

  submitBtn.addEventListener("click", getRate);

  // if the rate is null
  // exit the function
  // else replace card content
  function getRate() {
    if (rate === null) {
      return;
    }
    replaceCardContent();
  }

  function replaceCardContent() {
    const card = document.getElementsByClassName("card-feedback")[0];
    const template = document.querySelector("[data-card-output]");
    const clon = template.content.cloneNode(true);

    // remove each child
    for (let i = card.childNodes.length; i > 0; i--) {
      card.removeChild(card.firstChild);
    }

    // add class with styles
    card.classList.add("card-feedback__greetings");

    // append the template
    card.appendChild(clon);

    // display selected value
    document.querySelector("[data-rate]").innerText = rate;
  }

    </script>
  </body>
</html>
